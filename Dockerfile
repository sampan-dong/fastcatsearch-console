FROM openjdk:8-jre

ENV FASTCATSEARCH_CONSOLE_HOME /usr/local/fastcatsearch-console
ENV PATH $FASTCATSEARCH_CONSOLE_HOME:$PATH

RUN mkdir -p "$FASTCATSEARCH_CONSOLE_HOME"

ARG LIB
ARG FASTCATSEARCH_CONSOLE_VERSION=3.0.0

WORKDIR "$FASTCATSEARCH_CONSOLE_HOME"

COPY $LIB/fastcatsearch-console-$FASTCATSEARCH_CONSOLE_VERSION.tar.gz "$FASTCATSEARCH_CONSOLE_HOME"

RUN tar -zxvf fastcatsearch-console-$FASTCATSEARCH_CONSOLE_VERSION.tar.gz
WORKDIR fastcatsearch-console-$FASTCATSEARCH_CONSOLE_VERSION
RUN ls -al

EXPOSE 8080
ENTRYPOINT ["/bin/bash", "start-console.sh"]
CMD ["run"]